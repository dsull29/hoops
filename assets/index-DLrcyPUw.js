import{j as o,r as y,f as ge,R as me}from"./vendor-react-Dq3S5-Wh.js";import{T as O,D as oe,C as Q,L as K,S as J,B as w,a as se,b as ue,R as he,c as P,d as D,e as ye,F as fe,s as v,M as Se,f as V,h as pe,i as U}from"./vendor-antd-DmyIKQHr.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function e(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(s){if(s.ep)return;s.ep=!0;const n=e(s);fetch(s.href,n)}})();const{Title:Me,Text:xe}=O,ne=({logEntries:t})=>o.jsxs(o.Fragment,{children:[o.jsx(oe,{}),o.jsx(Q,{title:o.jsx(Me,{level:5,children:"Career Log"}),style:{maxHeight:300,overflowY:"auto"},children:o.jsx(K,{size:"small",dataSource:t.slice().reverse(),renderItem:a=>o.jsx(K.Item,{style:a.startsWith("---")?{fontWeight:"bold",color:"#faad14"}:{},children:o.jsx(xe,{children:a})})})})]}),{Text:F,Paragraph:X}=O,Pe=({event:t,player:a,onChoice:e,isLoading:r})=>o.jsxs(Q,{style:{marginBottom:24},bodyStyle:{paddingTop:16},children:[o.jsxs(X,{style:{marginBottom:16,fontSize:"1.05em",fontWeight:500,textAlign:"center"},children:[t.title," "]}),o.jsx(X,{style:{marginBottom:16,textAlign:"center"},children:t.description}),o.jsx(J,{direction:"vertical",style:{width:"100%"},size:"small",children:t.choices.map(s=>{const n=s.disabled?s.disabled(a):s.cost&&a.stats[s.cost.stat]<s.cost.amount;return o.jsxs(w,{type:"primary",onClick:()=>e(s),disabled:n||r,block:!0,size:"middle",danger:s.text.toLowerCase().includes("risk")||s.text.toLowerCase().includes("hard")||s.text.toLowerCase().includes("injury"),ghost:!n&&!s.text.toLowerCase().includes("risk")&&!s.text.toLowerCase().includes("hard")&&!s.text.toLowerCase().includes("injury"),style:{height:"auto",padding:"8px 12px",whiteSpace:"normal",lineHeight:"1.3",textAlign:"left"},children:[o.jsx(F,{strong:!0,style:{fontSize:"0.95em",display:"block"},children:s.text}),s.description&&o.jsx(F,{type:"secondary",style:{fontSize:"0.8em",display:"block",marginTop:1},children:s.description}),s.cost&&o.jsxs(F,{style:{fontSize:"0.75em",color:n?"inherit":"#ff7875",display:"block",marginTop:3},children:["Cost: ",s.cost.amount," ",s.cost.stat]})]},s.id)})})]}),{Header:ve,Content:Ce,Footer:ke}=se,{Title:Ee}=O,be=({children:t,isDarkMode:a,onThemeChange:e})=>o.jsxs(se,{style:{minHeight:"100vh"},children:[" ",o.jsxs(ve,{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 24px",position:"sticky",top:0,zIndex:10,width:"100%"},children:[" ",o.jsx(Ee,{level:3,style:{color:"white",margin:0,lineHeight:"64px"},children:"Hoops"}),o.jsx(ue,{checked:a,onChange:e,checkedChildren:"Dark",unCheckedChildren:"Light"})]}),o.jsxs(Ce,{style:{padding:"24px",marginTop:0},children:[" ",o.jsxs("div",{style:{padding:"24px 0",borderRadius:8,maxWidth:960,margin:"0 auto"},children:[" ",t]})]}),o.jsxs(ke,{style:{textAlign:"center"},children:["Hoops v0.4.2.LayoutFix - Concept by User Â©",new Date().getFullYear()]})]}),{Title:q,Paragraph:Re,Text:N}=O,Le=({player:t,onStartGame:a,metaSkillPointsBeforeThisRun:e})=>{var s;const r=t.stats.skillPoints-e;return o.jsx(he,{status:"info",title:o.jsx(q,{level:2,children:"Career Over"}),subTitle:o.jsx(Re,{strong:!0,children:(s=t.careerLog.find(n=>n.startsWith("--- CAREER OVER:")))==null?void 0:s.replace("--- CAREER OVER: ","")}),extra:[o.jsxs(w,{type:"primary",onClick:a,size:"large",children:["Start New Career (Total Legacy: ",t.stats.skillPoints," pts)"]},"new_career")],children:o.jsxs("div",{className:"desc",style:{textAlign:"left",maxWidth:600,margin:"0 auto"},children:[o.jsxs(q,{level:4,style:{textAlign:"center"},children:["Final Summary for ",t.name]}),o.jsxs(P,{bordered:!0,column:1,size:"small",children:[o.jsx(P.Item,{label:"Final Game Mode",children:o.jsx(D,{color:"purple",children:t.gameMode})}),o.jsx(P.Item,{label:"Final Role",children:o.jsx(D,{color:"blue",children:t.currentRole})}),Object.keys(t.stats).map(n=>o.jsx(P.Item,{label:o.jsx(N,{strong:!0,className:"capitalize",children:n.replace(/([A-Z])/g," $1")}),children:t.stats[n]},n)),o.jsx(P.Item,{label:o.jsx(N,{strong:!0,children:"Total Days Played"}),children:t.totalDaysPlayed}),o.jsx(P.Item,{label:o.jsx(N,{strong:!0,children:"Legacy Points Earned (This Run)"}),children:r})]}),o.jsx(oe,{children:"Career Log"}),o.jsx(ne,{logEntries:t.careerLog})]})})},{Title:we,Paragraph:Z}=O,Ae=({onStartGame:t,metaSkillPoints:a,hasSavedGame:e,onLoadGame:r,onClearSavedGame:s})=>o.jsxs("div",{style:{textAlign:"center",padding:"50px 20px"},children:[o.jsx(we,{level:1,style:{marginBottom:16},children:"Roguelike Basketball Sim"}),o.jsx(Z,{style:{fontSize:"1.2em",maxWidth:600,margin:"0 auto 24px auto"},children:"Forge your legacy through High School, College, and the Pros. Each choice shapes your path."}),o.jsx(ye,{title:"Current Legacy Points",value:a,valueStyle:{color:"#1890ff"}}),o.jsx(Z,{type:"secondary",style:{display:"block",margin:"8px auto 24px auto"},children:"(Legacy points give your next player a small starting boost!)"}),o.jsxs(J,{direction:"vertical",size:"middle",children:[o.jsxs(w,{type:"primary",size:"large",onClick:t,style:{minWidth:200,height:50,fontSize:"1.2em"},children:["Start New Career"," "]}),e&&o.jsxs(w,{type:"dashed",size:"large",onClick:r,style:{minWidth:200,height:50,fontSize:"1.2em"},children:["Load Saved Game"," "]})," ",e&&o.jsxs(w,{danger:!0,size:"small",onClick:s,style:{marginTop:8},children:["Clear Saved Game"," "]})]})]}),{Title:je}=O,Te=({player:t})=>{const{stats:a}=t,e=[{title:"Shooting",dataIndex:"Shooting",key:"Shooting",align:"center"},{title:"Athleticism",dataIndex:"Athleticism",key:"Athleticism",align:"center"},{title:"Basketball IQ",dataIndex:"Basketball IQ",key:"Basketball IQ",align:"center"},{title:"Energy",dataIndex:"Energy",key:"Energy",align:"center"},{title:"Morale",dataIndex:"Morale",key:"Morale",align:"center"}],r=[{key:"values",Shooting:a.shooting,Athleticism:a.athleticism,"Basketball IQ":a.basketballIQ,Energy:a.energy,Morale:a.morale}];return o.jsxs(Q,{size:"small",title:o.jsxs(je,{level:5,style:{margin:0},children:[t.name," - ",t.position," (",t.age," y.o.)"]}),style:{marginBottom:16},children:[o.jsxs(P,{size:"small",column:2,style:{marginBottom:12},children:[o.jsx(P.Item,{label:"Mode",children:o.jsx(D,{color:"purple",style:{marginRight:0},children:t.gameMode})}),o.jsx(P.Item,{label:"Role",children:o.jsx(D,{color:"blue",style:{marginRight:0},children:t.currentRole})}),o.jsxs(P.Item,{label:"Season",children:[t.currentSeasonInMode," (",t.currentSeason," career)"]}),o.jsxs(P.Item,{label:"Day",children:[t.currentDayInSeason," (",t.totalDaysPlayed," total)"]}),t.traits.length>0&&o.jsx(P.Item,{label:"Traits",span:2,children:t.traits.map(s=>o.jsx(D,{color:"geekblue",style:{marginRight:3,marginBottom:3},children:s},s))})]}),o.jsx(fe,{columns:e,dataSource:r,pagination:!1,size:"small",bordered:!0,style:{marginBottom:8},rowClassName:()=>"stats-table-row"})]})},f=99,x=10,R=100,C=100,Ie=20,b="HoopsGameState_v1",ee="HoopsMetaPoints_v1",te="HoopsTheme_v1",Y=["Freshman Newcomer","Sophomore Contender","Junior Varsity Player","Varsity Rotation","Varsity Starter","Team Captain","District Star","All-State Contender","All-American Prospect"],W=["Walk-On Hopeful","Practice Squad Player","Bench Warmer","End of Bench Specialist","Rotation Player","Key Substitute (6th Man)","Starter","Conference Star","All-American Candidate","Top Draft Prospect"],$=["Undrafted Free Agent","G-League Assignee","Two-Way Contract Player","End of Bench Pro","Rotation Contributor","Valuable Sixth Man","Starting Caliber Player","Established Star","All-Star Level Player","All-League Performer","MVP Candidate"],Oe=4,Ge=4,De=18,He=22,ae=["Alex","Jordan","Chris","Taylor","Morgan","Casey","Jamie","Devon","Riley","Jesse","Cameron","Drew","Avery","Kai","Logan","Parker","Quinn","Skyler","Taylor","Reese","Sage","Rowan","Finley","Emerson","Hayden","Blake","Charlie","Dakota","Aiden","Elliot","Jordan","Kendall","Sawyer","Tatum","Alexis","Bailey","Carter","Dylan","Evan","Harper","Jalen","Jaylen","Kieran","Landon","Mason","Nico","Owen","Peyton","Quentin","Reagan","Sloane","Tanner","Tyler","Zion","Aiden","Blake","Cameron","Dylan","Ethan","Finn","Gavin","Hunter","Isaac","Jaxon","Kaden","Liam","Mason","Noah","Owen","Parker","Quinn","Ryder","Sebastian","Tyler","Victor","Wyatt","Xander","Zachary","Aaron","Brayden","Caleb","Daniel","Elijah","Felix","Gabriel","Henry","Ian","Julian","Kevin","Leo","Miles","Nathan","Oscar","Paul","Quentin","Ryan","Samuel","Thomas","Uriel","Vincent","William","Xavier"],re=["Smith","Jones","Williams","Brown","Davis","Miller","Wilson","Moore","Taylor","Anderson","Thomas","Jackson","White","Harris","Martin","Thompson","Green","Hall","Young","Allen","Sanchez","Wright","King","Scott","Adams","Baker","Gonzalez","Nelson","Carter","Mitchell","Perez","Roberts","Turner","Phillips","Campbell","Parker","Evans","Edwards","Collins","Stewart","Morris","Rogers","Reed","Cook","Morgan","Bell","Murphy","Bailey","Rivera","Cooper","Richardson","Cox","Howard","Ward","Torres","Peterson","Gray","Ramirez","James","Watson","Brooks","Kelly","Sanders","Price","Bennett","Wood","Barnes","Ross","Henderson","Coleman","Jenkins","Perry","Powell","Long","Patterson","Hughes","Flores","Washington","Butler","Simmons","Foster","Gonzales","Bryant","Alexander","Russell","Griffin","Diaz","Hayes","Myers","Ford","Hamilton","Graham","Sullivan","Wallace","Woods","Cole","West","Jordan","Owens","Reynolds","Fisher","Ellis","Harrison","Gibson","McDonald","Cruz","Marshall","Ortiz","Gomez","Murray","Freeman","Wells","Webb","Simpson","Stevens","Tucker","Porter","Hunter","Hicks","Crawford","Henry","Boyd","Mason","Morales","Kennedy","Warren","Dixon","Ramos","Reyes","Burns","Gordon","Shaw","Holmes","Rice","Robertson","Hunt","Black","Daniels","Palmer","Mills","Nichols","Grant","Knight","Ferguson","Rose","Stone","Hawkins","Dunn","Perkins","Hudson","Spencer","Gardner","Stephens","Payne","Pierce","Berry","Matthews","Arnold","Wagner","Willis","Ray","Watkins","Olson","Carroll","Duncan","Snyder","Hart","Cunningham","Bradley","Lane","Andrews","Ruiz","Harper","Fox","Riley","Armstrong","Carpenter","Weaver","Greene","Lawrence","Elliott","Chavez","Sims","Austin","Peters","Kelley","Franklin","Lawson","Fields","Gutierrez","Ryan","Schmidt","Carr","Vasquez","Castillo","Wheeler","Chapman","Oliver"],_e=()=>{const t=ae[Math.floor(Math.random()*ae.length)],a=re[Math.floor(Math.random()*re.length)];return`${t} ${a}`},Be=()=>{const t=["Point Guard","Shooting Guard","Small Forward","Power Forward","Center"];return t[Math.floor(Math.random()*t.length)]},i=(t,a,e)=>Math.max(a,Math.min(t,e)),ze=t=>Math.round(t.shooting*1.2+t.athleticism*1.1+t.basketballIQ*1+t.professionalism*.5+t.charisma*.2),B=t=>{const a=[{id:"train_shooting",text:"Train Shooting",description:"Hit the gym to work on your jumper.",cost:{stat:"energy",amount:20},action:e=>{const r={...e.stats},s=Math.random()<r.professionalism/f?2:1;return r.shooting=i(r.shooting+s,x,f),r.energy=i(r.energy-20,0,R),{updatedPlayer:{...e,stats:r},outcomeMessage:`Focused on shooting. ${s>1?"Felt a real improvement!":"Good session."} Shooting +${s}, Energy -20.`}},disabled:e=>e.stats.energy<20},{id:"train_athleticism",text:"Train Athleticism",description:"Conditioning and strength training.",cost:{stat:"energy",amount:25},action:e=>{const r={...e.stats},s=Math.random()<r.professionalism/f?2:1;return r.athleticism=i(r.athleticism+s,x,f),r.energy=i(r.energy-25,0,R),{updatedPlayer:{...e,stats:r},outcomeMessage:`Pushed hard on athleticism. ${s>1?"Feeling stronger!":"Solid workout."} Athleticism +${s}, Energy -25.`}},disabled:e=>e.stats.energy<25},{id:"study_film",text:"Study Film",description:"Analyze game footage to improve your BBIQ.",cost:{stat:"energy",amount:10},action:e=>{const r={...e.stats},s=Math.random()<r.professionalism/f?2:1;return r.basketballIQ=i(r.basketballIQ+s,x,f),r.energy=i(r.energy-10,0,R),{updatedPlayer:{...e,stats:r},outcomeMessage:`Spent time studying film. ${s>1?"Key insights gained!":"Learned a few things."} BBIQ +${s}, Energy -10.`}},disabled:e=>e.stats.energy<10},{id:"rest",text:"Rest & Recover",description:"Take a day off to recover energy and morale.",action:e=>{const r={...e.stats};return r.energy=i(r.energy+30+Math.floor(Math.random()*11),0,R),r.morale=i(r.morale+5+Math.floor(Math.random()*6),0,C),{updatedPlayer:{...e,stats:r},outcomeMessage:"Took a much-needed rest day. Feeling refreshed. Energy and Morale increased."}}},{id:"social_event",text:"Attend Social Event",description:"Hang out with teammates or attend a public function.",cost:{stat:"energy",amount:15},action:e=>{const r={...e.stats};r.energy=i(r.energy-15,0,R);let s="Attended a social event. ";const n=Math.random();return n<.3?(r.charisma=i(r.charisma-2,x,f),r.morale=i(r.morale-5,0,C),s+="It was a bit awkward. Charisma -2, Morale -5."):n<.7?(r.charisma=i(r.charisma+1,x,f),s+="Made a few connections. Charisma +1."):(r.charisma=i(r.charisma+3,x,f),r.morale=i(r.morale+10,0,C),s+="It was a great time! Charisma +3, Morale +10."),{updatedPlayer:{...e,stats:r},outcomeMessage:s}},disabled:e=>e.stats.energy<15}];return{id:"daily_choices",title:`${t.gameMode} (${t.currentRole}) - Season ${t.currentSeasonInMode}, Day ${t.currentDayInSeason} (${t.age} y.o.)`,description:"What will you focus on today?",choices:a}},Fe={id:"minor_injury",title:"Minor Injury!",description:"You tweaked something during a light workout. Aches and pains are part of the game.",isMandatory:!0,choices:[{id:"acknowledge_injury",text:"Okay, I need to be careful.",action:t=>{const a={...t.stats},e=["athleticism","shooting"][Math.floor(Math.random()*2)],r=1+Math.floor(Math.random()*3);return a[e]=i(a[e]-r,x,f),a.energy=i(a.energy-10,0,R),a.morale=i(a.morale-5,0,C),{updatedPlayer:{...t,stats:a},outcomeMessage:`The injury set you back a bit. ${e} -${r}, Energy -10, Morale -5.`}}}]},Ne=t=>({id:"game_day",title:`Game Day! (${t.gameMode} - ${t.currentRole})`,description:"It's time to hit the court. How will you approach this game?",isMandatory:!0,choices:[{id:"play_hard",text:"Play Hard (High Risk/Reward)",cost:{stat:"energy",amount:30},action:a=>{const e={...a.stats};e.energy=i(e.energy-30-Math.floor(Math.random()*10),0,R);let r="You played hard! ";const s=(e.shooting+e.athleticism+e.basketballIQ)/3+(Math.random()*20-10);if(s>65){e.morale=i(e.morale+15,0,C);const n=["shooting","athleticism","basketballIQ"][Math.floor(Math.random()*3)];e[n]=i(e[n]+1,x,f),r+=`Stellar performance! You led the team. Morale +15, ${n} +1.`}else s>45?(e.morale=i(e.morale+5,0,C),r+="Solid contribution to the team. Morale +5."):(e.morale=i(e.morale-10,0,C),r+="Tough game, couldn't find your rhythm. Morale -10.");return{updatedPlayer:{...a,stats:e},outcomeMessage:r}},disabled:a=>a.stats.energy<40},{id:"play_cautiously",text:"Play Cautiously (Low Risk/Reward)",cost:{stat:"energy",amount:20},action:a=>{const e={...a.stats};e.energy=i(e.energy-20,0,R);let r="You played cautiously. ";return(e.shooting+e.athleticism+e.basketballIQ)/3+(Math.random()*10-5)>55?(e.morale=i(e.morale+5,0,C),r+="Played your role effectively. Morale +5."):(e.morale=i(e.morale-5,0,C),r+="Quiet game, didn't make much of an impact. Morale -5."),{updatedPlayer:{...a,stats:e},outcomeMessage:r}},disabled:a=>a.stats.energy<20}]}),We=t=>t.gameMode==="High School"||t.gameMode==="College"&&t.currentSeasonInMode<3?null:{id:"agent_meeting",title:"Agent Meeting",description:"Your agent wants to discuss your future.",isMandatory:!0,choices:[{id:"discuss_contract",text:"Discuss Contract Situation",action:a=>{let e="You discussed your contract. ";return a.stats.charisma>60||a.traits.includes("Good Agent")?(e+="Your agent seems confident they can get you a good deal soon.",a.stats.morale=i(a.stats.morale+5,0,C)):(e+="The conversation was a bit tense. No clear path forward yet.",a.stats.morale=i(a.stats.morale-3,0,C)),{updatedPlayer:a,outcomeMessage:e}}},{id:"seek_endorsement",text:"Seek Endorsement Opportunities",action:a=>{let e="Your agent will look into endorsement deals. ";return a.stats.charisma>70&&a.stats.shooting+a.stats.athleticism>120?(e+="A local shoe store offers you a small deal! Morale +10.",a.stats.morale=i(a.stats.morale+10,0,C)):a.traits.includes("Good Agent")?e+="Sarah thinks she can find something if you keep performing well.":e+="Vinny says 'Leave it to me, kid!' but you're not so sure.",{updatedPlayer:a,outcomeMessage:e}}},{id:"ignore_agent",text:"Politely Decline for Now",action:a=>({updatedPlayer:a,outcomeMessage:"You told your agent you're focused on the game right now."})}]},$e=t=>{const{currentRole:a,gameMode:e,age:r,stats:s,currentSeasonInMode:n}=t,l=[],h=ze(s);let c=e,d=a;e==="High School"&&(n>=Oe||r>=De)?(c="College",d=W[0],l.push(`--- You've graduated High School and are now entering College as a ${d}! ---`)):e==="College"&&(n>=Ge||r>=He)&&(c="Professional",d=$[0],l.push(`--- Your College career ends. You're taking your talents to the Professional level as an ${d}! ---`));const S=c==="High School"?Y:c==="College"?W:$;let M=S.indexOf(d);M===-1&&(d=S[0],M=0,e===c&&console.warn(`Role ${a} was invalid for mode ${c}. Reset to ${d}.`));const A=c==="High School"?100:c==="College"?150:200,m=c==="High School"?70:c==="College"?120:170,g=A+M*15,k=m+M*10;if(h>g&&M<S.length-1){const E=S[M+1];(E!==d||e===c)&&(d=E,l.push(`Your hard work paid off! You've been promoted to: ${d}.`))}else h<k&&M>0&&e===c&&(d=S[M-1],l.push(`A tough season. Your role has been adjusted to: ${d}.`));if(c!==e){const E=c==="High School"?Y:c==="College"?W:$;E.includes(d)||(console.warn(`Safeguard: Role ${d} was not valid for new mode ${c}. Resetting to ${E[0]}.`),d=E[0])}return{newRole:d,newMode:c,logMessages:l}},Ye=(t,a)=>{const e={...t};let r=a,s=!1,n,l;if(!r){if(e.totalDaysPlayed+=1,e.currentDayInSeason+=1,e.currentDayInSeason>Ie){e.currentDayInSeason=1,e.currentSeason+=1,e.currentSeasonInMode+=1,e.age+=1;const h=$e(e);if(e.gameMode!==h.newMode&&(e.currentSeasonInMode=1),e.gameMode=h.newMode,e.currentRole=h.newRole,e.careerLog=[...e.careerLog,...h.logMessages],l=`--- End of Season ${e.currentSeason-1}. Age: ${e.age}. ---`,h.logMessages.length>0){const c=h.logMessages.find(S=>S.startsWith("---")),d=h.logMessages.find(S=>!S.startsWith("---"));c&&(l+=" "+c.replace("---","").replace("---","").trim()),d&&(l+=" "+d)}}if(Math.random()<.1&&e.stats.energy<30&&!r)r=Fe,e.careerLog=[...e.careerLog,"--- Random Event: Minor Injury ---"],l=(l?l+" & ":"")+"Minor Injury!";else if(e.totalDaysPlayed>0&&e.totalDaysPlayed%7===0&&!r)r=Ne(e),e.careerLog=[...e.careerLog,"--- Scheduled: Game Day ---"],l=(l?l+" & ":"")+"Game Day!";else if(e.totalDaysPlayed>0&&e.totalDaysPlayed%30===0&&!r){const h=We(e);h&&(r=h,e.careerLog=[...e.careerLog,"--- Scheduled: Agent Meeting ---"],l=(l?l+" & ":"")+"Agent Meeting!")}r||(r=B(e))}return e.age>40&&e.gameMode==="Professional"&&(s=!0,n="After a long and storied career, it's time to retire."),e.stats.energy<=0&&Math.random()<.2&&(s=!0,n="You suffered a severe burnout and had to retire."),s&&n&&(e.careerOver=!0,e.careerLog=[...e.careerLog,`--- CAREER OVER: ${n} ---`]),{nextPlayerState:e,nextEvent:r,isGameOver:s,gameOverMessage:n,eventTriggerMessage:l}},Qe=(t=0)=>{const a=25+Math.floor(t/2);return{name:_e(),position:Be(),age:14,gameMode:"High School",currentRole:Y[0],stats:{shooting:i(a+Math.floor(Math.random()*15)-7,x,f-30),athleticism:i(a+Math.floor(Math.random()*20)-10,x,f-25),basketballIQ:i(a+Math.floor(Math.random()*15)-7,x,f-30),charisma:i(20+Math.floor(Math.random()*20),x,f),professionalism:i(15+Math.floor(Math.random()*20),x,f),energy:80,morale:70,skillPoints:t},traits:[],currentSeason:1,currentSeasonInMode:1,currentDayInSeason:1,totalDaysPlayed:0,careerOver:!1,careerLog:["Your High School career begins as a Freshman Newcomer!"]}},Je=()=>{const[t,a]=y.useState({player:null,currentEvent:null,isLoading:!1,gamePhase:"menu"}),[e,r]=y.useState(()=>{const m=localStorage.getItem(ee);return m?parseInt(m,10):0}),[s,n]=y.useState(0),[l,h]=y.useState(()=>localStorage.getItem(te)==="dark"),[c,d]=y.useState(!1);y.useEffect(()=>{localStorage.setItem(ee,e.toString())},[e]),y.useEffect(()=>{localStorage.setItem(te,l?"dark":"light"),document.documentElement.setAttribute("data-theme",l?"dark":"light")},[l]),y.useEffect(()=>{const m=localStorage.getItem(b);if(m)try{const g=JSON.parse(m);if(g.player&&g.gamePhase){const k=B(g.player);a({player:g.player,currentEvent:k,isLoading:!1,gamePhase:g.gamePhase}),n(g.metaSkillPointsAtRunStart??e)}else localStorage.removeItem(b)}catch(g){console.error("Error loading state from local storage:",g),localStorage.removeItem(b)}d(!0)},[e]);const S=y.useCallback((m,g)=>{if(m.player&&m.gamePhase==="playing"){const k={player:m.player,isLoading:!1,gamePhase:m.gamePhase,metaSkillPointsAtRunStart:g};localStorage.setItem(b,JSON.stringify(k)),v.success("Game saved!")}else m.gamePhase!=="menu"&&v.warning("No active game to save.")},[]),M=y.useCallback(()=>{const m=localStorage.getItem(b);if(m)try{const g=JSON.parse(m);if(g.player&&g.gamePhase){const k=B(g.player);return n(g.metaSkillPointsAtRunStart??e),v.success("Game loaded!"),{player:g.player,currentEvent:k,isLoading:!1,gamePhase:g.gamePhase}}else throw new Error("Invalid saved game structure.")}catch(g){console.error("Error loading saved game:",g),v.error("Could not load saved game. It might be corrupted."),localStorage.removeItem(b)}else v.info("No saved game found.");return null},[e]),A=y.useCallback(()=>{localStorage.removeItem(b),v.info("Saved game cleared.")},[]);return{gameState:t,setGameState:a,metaSkillPoints:e,setMetaSkillPoints:r,metaSkillPointsAtRunStart:s,setMetaSkillPointsAtRunStart:n,isDarkMode:l,setIsDarkMode:h,hasLoadedInitialState:c,saveGameToStorage:S,loadGameFromStorage:M,clearSavedGameFromStorage:A}},Ke=()=>{const{gameState:t,setGameState:a,metaSkillPoints:e,setMetaSkillPoints:r,metaSkillPointsAtRunStart:s,setMetaSkillPointsAtRunStart:n,isDarkMode:l,setIsDarkMode:h,hasLoadedInitialState:c,saveGameToStorage:d,loadGameFromStorage:S,clearSavedGameFromStorage:M}=Je(),A=y.useCallback(()=>{n(e);const u=Qe(e),G={player:u,currentEvent:B(u),isLoading:!1,gamePhase:"playing"};a(G)},[e,a,n]),m=y.useCallback(()=>{const u=S();u&&a(u)},[S,a]),g=y.useCallback(()=>{M(),t.gamePhase!=="menu"&&a({player:null,currentEvent:null,isLoading:!1,gamePhase:"menu"})},[M,t.gamePhase,a]),k=y.useCallback(()=>{t.player&&Se.confirm({title:"Retire Career?",content:"Are you sure you want to end your current career? This action cannot be undone.",okText:"Retire",cancelText:"Cancel",onOk:()=>{const u=t.player,p={...u,careerOver:!0,careerLog:[...u.careerLog,"--- CAREER OVER: You decided to retire voluntarily. ---"]},j=Math.floor(p.totalDaysPlayed/10)+p.stats.shooting+p.stats.athleticism,H=s+j;r(H);const z={...p,stats:{...p.stats,skillPoints:H}};a({player:z,currentEvent:null,isLoading:!1,gamePhase:"gameOver"}),localStorage.removeItem("roguelikeBasketballGameState_v1.2"),v.info("You have retired. Your legacy awaits!")}})},[t.player,s,a,r]),E=y.useCallback(u=>{var G;if(!t.player||t.isLoading||!u||typeof u.action!="function"){console.error("Invalid choice or action function:",u),v.error("An error occurred with the selected choice. Please try again or reload."),a(p=>({...p,isLoading:!1}));return}if(u.cost&&t.player.stats[u.cost.stat]<u.cost.amount){v.error(`Not enough ${(G=u.cost)==null?void 0:G.stat}!`);return}a(p=>({...p,isLoading:!0})),setTimeout(()=>{try{const{updatedPlayer:p,outcomeMessage:j,immediateEvent:H}=u.action(t.player),z=[...p.careerLog,j];v.success(j,2);const ce={...p,careerLog:z},T=Ye(ce,H??null);if(T.eventTriggerMessage&&T.eventTriggerMessage.split("---").map(L=>L.trim()).filter(L=>L.length>0).forEach((L,_)=>{setTimeout(()=>v.info(L,4),_*500)}),T.isGameOver){const I=T.nextPlayerState,L=Math.floor(I.totalDaysPlayed/10)+I.stats.shooting+I.stats.athleticism,_=s+L;r(_);const de={...I,stats:{...I.stats,skillPoints:_}};a({player:de,currentEvent:null,isLoading:!1,gamePhase:"gameOver"}),localStorage.removeItem("roguelikeBasketballGameState_v1")}else a({player:T.nextPlayerState,currentEvent:T.nextEvent,isLoading:!1,gamePhase:"playing"})}catch(p){console.error("Error during choice action processing:",p),v.error("A critical error occurred. Please reload the game."),a(j=>({...j,isLoading:!1,gamePhase:"menu",player:null,currentEvent:null}))}},300)},[t.player,t.isLoading,s,a,r]),le=u=>{h(u)},ie={algorithm:l?U.darkAlgorithm:U.defaultAlgorithm,token:{colorPrimary:l?"#66ccff":"#1677ff"}};return c?o.jsxs(pe,{theme:ie,children:[t.isLoading&&o.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:l?"rgba(0,0,0,0.7)":"rgba(255,255,255,0.7)",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(V,{size:"large",tip:"Processing..."})}),o.jsxs(be,{isDarkMode:l,onThemeChange:le,children:[t.gamePhase==="menu"&&o.jsx(Ae,{onStartGame:A,metaSkillPoints:e,hasSavedGame:!!localStorage.getItem(b),onLoadGame:m,onClearSavedGame:g}),t.gamePhase==="playing"&&t.player&&t.currentEvent&&o.jsxs(o.Fragment,{children:[o.jsxs(J,{style:{marginBottom:16,display:"flex",justifyContent:"flex-end"},children:[o.jsx(w,{size:"small",onClick:()=>d(t,s),style:{marginRight:8},children:"Save Game"}),o.jsx(w,{size:"small",danger:!0,onClick:k,children:"Retire Career"})]}),o.jsx(Te,{player:t.player}),o.jsx(Pe,{event:t.currentEvent,player:t.player,onChoice:E,isLoading:t.isLoading}),o.jsx(ne,{logEntries:t.player.careerLog})]}),t.gamePhase==="gameOver"&&t.player&&o.jsx(Le,{player:t.player,onStartGame:A,metaSkillPointsBeforeThisRun:s})]})]}):o.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",width:"100vw"},children:o.jsx(V,{size:"large",tip:"Loading Game..."})})};ge.createRoot(document.getElementById("root")).render(o.jsx(me.StrictMode,{children:o.jsx(Ke,{})}));
